(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e,t,a){e.exports=a(288)},288:function(e,t,a){"use strict";a.r(t);a(183),a(289),a(186),a(154);var n=a(0),i=a.n(n),o=a(71),s=a.n(o),c=a(94),r=a(61),l=a(4),p=a(5),d=a(8),u=a(6),h=a(3),m=a(7),f=a(58),g=a.n(f),v=(a(159),function(e,t){var a;return function(){var n=arguments;a||(e.apply(this,n),a=!0,setTimeout(function(){return a=!1},t))}}),k=function(e,t){var a;return function(){var n=this,i=arguments;clearTimeout(a),a=setTimeout(function(){return e.apply(n,i)},t)}},y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleResize=k(function(){console.log("debounce"),a.setState({innerHeight:a.calculateHeight()})},200),a.state={open:!1,innerHeight:0,height:a.props.maxHeight},a.innerText=i.a.createRef(),a.outerText=i.a.createRef(),a.toggleShow=a.toggleShow.bind(Object(h.a)(a)),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a.calculateHeight=a.calculateHeight.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.setState({innerHeight:this.calculateHeight(),height:this.outerText.clientHeight}),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"toggleShow",value:function(){this.state.open?this.setState({height:this.outerText.clientHeight,open:!this.state.open}):this.setState({height:this.state.innerHeight,open:!this.state.open})}},{key:"calculateHeight",value:function(){return this.innerText.clientHeight}},{key:"handleClick",value:function(e){}},{key:"render",value:function(){var e=this,t={maxHeight:this.state.open?this.state.innerHeight:this.props.maxHeight,transition:".4s ease-out",overflow:"hidden"};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"read-more "+(this.state.open?"open":"closed")},i.a.createElement("div",{className:"full-text",style:t,ref:function(t){return e.outerText=t}},i.a.createElement("div",{className:"inner-text",ref:function(t){return e.innerText=t}},this.props.children)),this.state.innerHeight>parseInt(this.props.maxHeight)&&i.a.createElement("div",{className:"toggle-btn",onClick:this.toggleShow},this.state.open?this.props.openText:this.props.closedText,i.a.createElement("span",{className:"icon icomoon icon-arrow-down"}))))}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.state={},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"office-list-spinner"},i.a.createElement("div",{className:"sk-circle"},i.a.createElement("div",{className:"sk-circle1 sk-child"}),i.a.createElement("div",{className:"sk-circle2 sk-child"}),i.a.createElement("div",{className:"sk-circle3 sk-child"}),i.a.createElement("div",{className:"sk-circle4 sk-child"}),i.a.createElement("div",{className:"sk-circle5 sk-child"}),i.a.createElement("div",{className:"sk-circle6 sk-child"}),i.a.createElement("div",{className:"sk-circle7 sk-child"}),i.a.createElement("div",{className:"sk-circle8 sk-child"}),i.a.createElement("div",{className:"sk-circle9 sk-child"}),i.a.createElement("div",{className:"sk-circle10 sk-child"}),i.a.createElement("div",{className:"sk-circle11 sk-child"}),i.a.createElement("div",{className:"sk-circle12 sk-child"})))}}]),t}(n.Component),b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={isOpen:!1,elementHeight:"0px"},a.accordionEl=i.a.createRef(),a.toggleAccordion=a.toggleAccordion.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"toggleAccordion",value:function(){var e=this.accordionEl.scrollHeight;this.setState({isOpen:!this.state.isOpen,elementHeight:this.state.isOpen?"0px":"".concat(e,"px")})}},{key:"render",value:function(){var e=this,t={maxHeight:this.state.elementHeight,overflow:"hidden",transition:"max-height .2s ease-out"};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"accordion-item "+(this.state.isOpen?"open":"closed")},i.a.createElement("div",{className:"accordion-title",onClick:this.toggleAccordion},this.props.label,i.a.createElement("span",{className:"toggle-icon-box"},i.a.createElement("span",{className:"toggle-icon"}))),i.a.createElement("div",{className:"accordion-content",ref:function(t){return e.accordionEl=t},style:t},i.a.createElement("div",{className:"inner-content",dangerouslySetInnerHTML:{__html:this.props.children}}))))}}]),t}(n.Component),w={chosenTypeText:"Alle typer",chosenType:{id:0,name:"Alle typer"},capacity:1,coworkChecked:!1,priceChanged:!1,orderbyKey:"price_asc",orderbyTitle:"Pris lav til h\xf8j",selectedPeriod:{period:!1,startDate:!1,endDate:!1},selectedIndustry:[],selectedLocations:[],chosenFacilities:[],chosenFacilitiesText:"V\xe6lg faciliteter",chosenFacilitiesDefaultText:"V\xe6lg faciliteter"},C=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).validateValue=function(e){return e<=a.minVal&&(e=a.minVal),e>=a.maxVal&&(e=a.maxVal),e},a.triggerUpdate=function(){a.props.onUpdate&&a.props.onUpdate(a.state.val)},a.isUsed=function(){var e=w.capacity,t=a.state.val,n=!0;return parseInt(e)<parseInt(t)&&(n=!1),n?"not-used":"used"},a.state={val:a.props.startVal||0},a.minVal=a.props.minVal||0,a.maxVal=a.props.maxVal||999,a.handleQuantityClick=a.handleQuantityClick.bind(Object(h.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a.inputRef=i.a.createRef(),a.debounceEvent=k(a.triggerUpdate,150),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"handleQuantityClick",value:function(e){e.preventDefault();var t=e.target,a=parseInt(t.dataset.val);a+=parseInt(this.state.val),a=this.validateValue(a),this.setState({val:a},this.debounceEvent())}},{key:"handleInputChange",value:function(){var e=this.inputRef.value;e=this.validateValue(e),this.setState({val:e},this.debounceEvent())}},{key:"render",value:function(){var e=this,t=this.props.className?this.props.className:"",a=this.state.val<=this.minVal?"disabled":"",n=this.state.val>=this.maxVal?"disabled":"";return i.a.createElement("div",{className:"filter-element ".concat(this.isUsed()," ").concat(t," "),id:"office_capacity_filter"},i.a.createElement("h4",{className:"filter-heading"},"Personer"),i.a.createElement("div",{className:"input-wrap number-input"},i.a.createElement("span",{className:"minus quantity-btn "+a,"data-val":"-1",onClick:this.handleQuantityClick},"\u2013"),i.a.createElement("input",{className:"quantity-input",type:"number",inputMode:"numeric",name:"office_capacity",id:"office_capacity",value:this.state.val,onChange:this.handleInputChange,ref:function(t){return e.inputRef=t},min:this.minVal,max:this.maxVal}),i.a.createElement("span",{className:"plus quantity-btn "+n,"data-val":"1",onClick:this.handleQuantityClick},"+")))}}]),t}(n.Component),O=a(116),N=(a(283),["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"]),S=["man","tir","ons","tor","fre","l\xf8r","s\xf8n"];Object(O.b)("da",{localize:{month:function(e){return N[e]},day:function(e){return S[e]}},formatLong:{}});var P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleUpdate=function(){var e=a.state.date&&a.state.endDate,t=a.state.selected&&"id"in a.state.selected;e&&t?a.props.onUpdate({period:a.state.selected,startDate:a.state.date,endDate:a.state.endDate}):t&&(a.props.updateParentState?a.props.updateParentState("selectedPeriod",{period:a.state.selected,startDate:!1,endDate:!1}):a.props.onUpdate({period:a.state.selected,startDate:a.state.date,endDate:a.state.endDate}))},a.handleRadioUpdate=function(e){e.target;var t=e.target.value,n=a.props.periods.find(function(e){return parseInt(e.id)===parseInt(t)}),i={selected:n};a.state.date&&(i.endDate=a.getEndDate(a.state.date,n.id)),a.setState(i,a.handleUpdate)},a.toggleShowPopup=function(){!0!==a.state.showPopup&&a.onOpen(),a.setState({showPopup:!a.state.showPopup})},a.handleDateChange=function(e){var t={date:e};if(a.state.selected&&"id"in a.state.selected){var n=a.getEndDate(e);t.endDate=n}a.setState(t,a.handleUpdate)},a.getEndDate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.state.selected.id;if(!a.state.selected&&!t)return!1;var n=new Date(e);return n.setMonth(e.getMonth()+t),n.setDate(1),n.setHours(-1),n.setMinutes(59),n.setSeconds(59),n},a.filterDates=function(e){var t=new Date(e);t.setDate(t.getDate()-1);var n=t.getMonth()!==e.getMonth(),i=!1;if(a.props.bookedDates)for(var o=a.props.bookedDates,s=0;s<o.length;s++){var c=new Date(o[s].start_date),r=new Date(o[s].end_date);if(e>c&&e<r){i=!0;break}}return n&&!i},a.formattedDate=function(e){if(!e)return!1;var t=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"][e.getMonth()].substr(0,3),a=e.getDate();return"".concat(a,". ").concat(t,".")},a.addBookedDatesClass=function(e){var t=!1;if(a.props.bookedDates)for(var n=a.props.bookedDates,i=0;i<n.length;i++){var o=new Date(n[i].start_date),s=new Date(n[i].end_date);if(e>o&&e<s){t=!0;break}}return t?"booked":void 0},a.onOpen=function(){a.popupContent.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&a.setState({edge:!0})},a.isUsed=function(){var e=w.selectedPeriod,t=a.state.selected,n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(n.length!==i.length)return"used";for(var o=0;o<n.length;o++){var s=n[o];if(e[s]!=t[s])return"used"}return"not-used"},a.state={selected:a.props.selected||{},showPopup:!1,date:!1,endDate:!1,edge:!1},a.node=i.a.createRef(),a.popupContent=i.a.createRef(),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"handleClick",value:function(e){this.node.contains(e.target)||!0===this.state.showPopup&&this.toggleShowPopup()}},{key:"render",value:function(){var e,t=this,a="",n=this;this.props.periods&&(a=this.props.periods.map(function(e){return i.a.createElement("label",{key:e.id,htmlFor:"office_period"+e.id},i.a.createElement("input",{type:"radio",name:"office_period",value:e.id,id:"office_period"+e.id,onChange:n.handleRadioUpdate,checked:parseInt(n.props.selected.period.id)===parseInt(e.id),"data-label":e.name}),i.a.createElement("span",{className:"checkmark"}),i.a.createElement("span",{className:"input-title"},e.name))}));var o=new Date;e=11===o.getMonth()?new Date(o.getFullYear()+1,0,1):new Date(o.getFullYear(),o.getMonth()+1,1);var s=null;return this.state.date&&"id"in this.state.selected&&((s=new Date(this.state.date)).setMonth(s.getMonth()+this.state.selected.id),s.setDate(1),s.setHours(-1)),i.a.createElement("div",{className:"filter-element period-select input-popup type-radio ".concat(this.isUsed()," ").concat(this.props.className),"data-type":"radio",ref:function(e){return t.node=e}},i.a.createElement("h4",{className:"filter-heading"},"Periode"),i.a.createElement("div",{className:"input-wrap",onClick:this.toggleShowPopup},i.a.createElement("div",{className:"chosen-value","data-empty-text":"V\xe6lg periode"},!1!==n.props.selected.period&&!1!==this.state.date?this.state.selected.name+" Fra "+this.formattedDate(this.state.date):"V\xe6lg periode")),i.a.createElement("div",{className:"input-popup-content "+(this.state.showPopup?"open":"closed")+(!0===this.state.edge?" edge":""),ref:function(e){return t.popupContent=e}},i.a.createElement("div",{className:"periods"},a),i.a.createElement("hr",{className:"divider"}),i.a.createElement(O.a,{inline:!0,selected:this.props.selected.startDate,onChange:this.handleDateChange,filterDate:this.filterDates,minDate:e,startDate:this.props.selected.startDate,endDate:this.props.selected.endDate,dayClassName:this.addBookedDatesClass,locale:"da",dateFormat:"YYYY-MM-DD HH:MM:SS"})))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleKeydown=function(e){"Escape"!==e.key&&27!=e.keyCode||!0!==a.state.open||a.toggleShow()},a.state={open:!1},a.toggleShow=a.toggleShow.bind(Object(h.a)(a)),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeydown)}},{key:"componentWillUnmount",value:function(){}},{key:"toggleShow",value:function(){this.setState({open:!this.state.open})}},{key:"handleClick",value:function(e){}},{key:"render",value:function(){this.state.open?this.state.innerHeight:this.props.maxHeight;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"share-overlay "+(this.state.open?"open":"closed"),onClick:this.toggleShow}),i.a.createElement("div",{className:"share-modal "+(this.state.open?"open":"closed")},i.a.createElement("div",{className:"close-btn",onClick:this.toggleShow}),i.a.createElement("div",{className:"inside-padding"},"Hvad skal der ske her?")),i.a.createElement("div",{className:"share-btn "+(this.state.open?"open":"closed"),onClick:this.toggleShow},i.a.createElement("span",{className:"btn"},i.a.createElement("span",{className:"btn-title"},this.props.buttonTitle),i.a.createElement("span",{className:"icomoon icon "+this.props.icon}))))}}]),t}(n.Component),x=function(e,t){var a;if(e=parseInt(e),isNaN(e))return 0;for(var n=Math.floor(e).toString().split(""),i=-3;n.length+i>0;)n.splice(i,0,"."),i-=4;return t>0?(a=e.toFixed(t).split(".")[1],n.join("")+","+a):n.join("")},D=a(24),I=function(e){return e=e.replace(/&amp;/g,"&")},L=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).toggleFavoutite=function(){a.setState({favourited:!a.state.favourited})},a.newSplash=function(e){var t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<40?i.a.createElement("span",{className:"office-new-splash"},"Nyhed"):null},a.favouriteBtn=function(e){return a.props.user.loggedIn?i.a.createElement("div",{className:"favourite-post "+(e?"active":""),onClick:a.toggleFavoutite},i.a.createElement("span",{className:"icon icomoon icon-hjerte-aktiv"})):null},a.toggleShowCowork=function(){a.setState({showCowork:!a.state.showCowork})},a.onCarouselChange=function(e){return a.setState({currentSlide:parseInt(e)})},a.state={favourited:"favourited"in a.props.post&&a.props.post.favourited,currentSlide:0,showCowork:!1},a.handleLinkClick=a.handleLinkClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"handleLinkClick",value:function(e){this.props.postClicked(e)}},{key:"render",value:function(){var e=this,t=(this.props.offices,this.props.post),a=function(e){return e.preventDefault()},n=null;return n=t.gallery&&t.gallery.length>1?i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{infinite:!0,arrowLeft:i.a.createElement("span",{className:"slide-arrow slide-prev icon icomoon icon-arrow-left"}),arrowRight:i.a.createElement("span",{className:"slide-arrow slide-next icon icomoon icon-arrow-right"}),addArrowClickHandler:!0,offset:0,value:this.state.currentSlide,onChange:this.onCarouselChange,draggable:!1},t.gallery.slice(0,5).map(function(n,o){return i.a.createElement(D.b,{to:t.post_link,onClick:e.handleLinkClick,key:"".concat(t.ID,"_").concat(o),className:"slide",style:{backgroundImage:"url("+n+")"},onDragStart:a})}))):i.a.createElement(D.b,{to:t.post_link,className:"image",style:{backgroundImage:t.thumbnail?"url("+t.thumbnail+")":"none"}}),i.a.createElement(i.a.Fragment,null,i.a.createElement("article",{key:t.ID,id:"office-"+t.ID,className:"single-post single-office"},i.a.createElement("div",{className:"post-images"},this.newSplash(t.post_date),n),i.a.createElement("div",{className:"content-wrap"},i.a.createElement("div",{className:"office-area"},!1!==t.office_location?t.office_location.map(function(e){return i.a.createElement("span",{className:"term",key:t.ID+"_"+e.term_id},e.name)}):null),i.a.createElement("div",{className:"office-title"},i.a.createElement(D.b,{to:t.post_link,onClick:this.handleLinkClick},i.a.createElement("h2",{className:"post-title"},t.post_title))),i.a.createElement("div",{className:"office-meta"},i.a.createElement("div",{className:"icons"},i.a.createElement("div",{className:"calendar office-icon",key:"calendar"},i.a.createElement("span",{className:"icomoon icon-kalender"}),i.a.createElement("span",{className:"icons-title"},"Min. 6 mdr.")),i.a.createElement("div",{className:"capacity office-icon",key:"capacity"},i.a.createElement("span",{className:"icomoon icon-profil2"}),i.a.createElement("span",{className:"icons-title"},t.office_capacity)),i.a.createElement("div",{className:"business office-icon",key:"business"},i.a.createElement("span",{className:"icomoon icon-taske"}),i.a.createElement("span",{className:"icons-title"},"office_industry"in t&&!1!==t.office_industry&&t.office_industry.length>0?I(t.office_industry[0].name):"branche"))),!1!==t.office_price?i.a.createElement("div",{className:"office-price"},i.a.createElement("span",{className:"price-prefix",key:"price-prefix"},"Pris fra: "),i.a.createElement("span",{className:"price-text",key:"price-text"},x(t.office_price),",- pr. mdr. pr. person")):""),function(t,a){if((!0===t||"1"===t)&&a.length)return i.a.createElement("div",{className:"office-cowork-text "+(e.state.showCowork?"open":"closed")},a)}(t.office_cowork,t.office_cowork_text)),function(t){if(!0===t||"1"===t)return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"cowork-banner",onMouseEnter:e.toggleShowCowork,onMouseLeave:e.toggleShowCowork,onClick:e.toggleShowCowork},i.a.createElement("span",{className:"title"},"Udlejer er interesseret i ",i.a.createElement("u",null,"co-working ",i.a.createElement("span",{className:"icon icomoon icon-info"})))))}(t.office_cowork)))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={},a.listRef=i.a.createRef(),a.handleScrollEvent=a.handleScrollEvent.bind(Object(h.a)(a)),a.postClicked=a.postClicked.bind(Object(h.a)(a)),a.throttleEvent=v(a.handleScrollEvent,500),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){console.log("componentDidMount"),document.addEventListener("scroll",this.throttleEvent),window.scrollTo(0,this.props.listScrolled);var e=new Event("scroll");window.dispatchEvent(e)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.throttleEvent)}},{key:"handleScrollEvent",value:function(){this.props.trackScrolling&&this.props.trackScrolling(this.listRef.current)}},{key:"postClicked",value:function(e){var t=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop;this.props.setListScrollPosition&&this.props.setListScrollPosition(t)}},{key:"render",value:function(){var e,t=this,a=this.props.offices||[];return!0===this.props.loadingMore&&(e=i.a.createElement(E,null)),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"office-list",ref:this.listRef},a.map(function(e){return i.a.createElement(L,{key:e.ID,post:e,postClicked:t.postClicked,user:t.props.user})})),e)}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.IMAGES="http://officely.byhand.nu/wp-content/themes/officely/assets/images/",a.toggleFavoutite=function(){a.setState({favourited:!a.state.favourited})},a.getBookedDates=function(e){var t=window.wpApiSettings.nonce;e&&fetch("".concat(a.API_URL,"officely/v2/officebookings/").concat(e),{headers:{"X-WP-Nonce":t,"content-type":"application/json"}}).then(function(e){return!0===e.ok?e.json():(console.log(e.url+": "+e.status+" - "+e.statusText),!1)}).then(function(e){return console.log(e),!1!==e&&a.setState({bookedDatestest:e}),e}).catch(function(e){console.error("Error when fetching: ",e)})},a.stickyOnScroll=function(e){var t=a.bookingBox,n=a.bookingRowTop,i=(a.bookingBoxLeft,t.clientWidth),o=t.clientHeight,s=a.galleryBox;null!==a.bookingRow&&(n=a.bookingRow.getBoundingClientRect().top,a.bookingRow.clientWidth,a.bookingRow.getBoundingClientRect().left);var c=a.postBottom;c-o<=window.pageYOffset?(t.style.position="absolute",t.style.top=c-o+"px",s.style.height=o+"px",t.classList.add("fixed")):n<=0?(t.style.position="fixed",t.style.top="0",t.style.height=o+"px",t.classList.add("fixed"),s.style.height=o+"px"):(t.style.position="relative",t.style.height="",s.style.height="auto",t.classList.remove("fixed"))},a.newSplash=function(e){var t=new Date(e);return((new Date).getTime()-t.getTime())/864e5<40?i.a.createElement("span",{className:"office-new-splash"},"Nyhed"):null},a.handleSubmitBooking=function(){if(window.wpApiSettings.loggedIn){var e={},t=!1;!1!==a.state.selectedPeriod.startDate&&!1!==a.state.selectedPeriod.endDate||(e.periodInvalid=!0,t=!0),(a.state.selectedPeople<1||!1===a.state.selectedPeople)&&(e.numberInvalid=!0,t=!0),!1===t?a.setState({confirmationBoxOpen:!0}):a.setState(e)}else{var n=new Event("showLoginModal",{referer:a.props.slug});window.dispatchEvent(n)}},a.handleBookingRequest=function(){var e=window.wpApiSettings.nonce,t=a.state.selectedPeople,n=a.state.selectedPeriod.period.id,i=a.state.selectedPeriod.startDate,o=a.state.selectedPeriod.endDate;if(console.log(t,n,i,o),void 0===t||null==t)return!1;if(void 0===n||null===n)return!1;if(void 0===i||null===i||!1===i)return!1;if(void 0===o||null===o||!1===o)return!1;var s={people:t,period:n,startDate:i,endDate:o};fetch("".concat(a.API_URL,"officely/v2/submitbooking/").concat(a.props.post.ID),{method:"POST",headers:{"X-WP-Nonce":e},body:JSON.stringify(s)}).then(function(e){return e.json()}).then(function(e){console.log(e),e.code}).catch(function(e){console.error("Error when fetching: ",e)})},a.random_elems=function(e,t){var a=e.length,n={},i=[];t>a&&(t=a);for(var o=0;o<t;o++){var s=void 0;do{s=~~(Math.random()*a)}while(s in n);n[s]=null,i.push(e[s])}return i},a.isOwnPost=function(){if(!0!==window.wpApiSettings.loggedIn)return!1;var e=parseInt(window.wpApiSettings.id);return parseInt(a.props.post.post_author)===e},a.confirmationBox=function(e,t){var n=function(){a.setState({confirmationBoxOpen:!1})};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"booking-confirmation-modal-overlay ".concat(e?"open":""),onClick:n}),i.a.createElement("div",{className:"booking-confirmation-modal ".concat(e?"open":"")},i.a.createElement("h3",{className:"modal-heading",dangerouslySetInnerHTML:{__html:window.wpApiSettings.bookingboxHeading}}),i.a.createElement("div",{className:"inside-padding"},i.a.createElement("span",{className:"close-btn",onClick:n}),i.a.createElement("div",{className:"content"},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:window.wpApiSettings.bookingboxContent}}),"Periode: ",t.period.name,"Start: ",function(e){if(!e)return!1;var t=(e=new Date(e)).getFullYear(),a=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"][e.getMonth()].substr(0,3),n=e.getDate();return"".concat(n,". ").concat(a,". ").concat(t)}(t.startDate),"Kontor: ",t.post.post_title,"Udlejer: ",t.post.post_author_name,i.a.createElement("div",{dangerouslySetInnerHTML:{__html:window.wpApiSettings.bookingboxContentAfter}}),i.a.createElement("button",{onClick:a.handleBookingRequest},"Send anmodning")))))},a.state={owner:!1,selectedPeople:1,selectedPeriod:{period:!1,startDate:!1,endDate:!1},favourited:!1,startDate:!1,endDate:!1,bookedDates:!1,relatedOffices:[],numberInvalid:!1,periodInvalid:!1,confirmationBoxOpen:!1},a.bookingBox=i.a.createRef(),a.galleryBox=i.a.createRef(),a.bookingRow=i.a.createRef(),a.scrollToPost=a.scrollToPost.bind(Object(h.a)(a)),a.getUserData=a.getUserData.bind(Object(h.a)(a)),a.handleUpdatePeople=a.handleUpdatePeople.bind(Object(h.a)(a)),a.handleUpdatePeriod=a.handleUpdatePeriod.bind(Object(h.a)(a)),a.throttleScroll=v(a.stickyOnScroll,100),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.throttleScroll),this.props.clearSingleOffice()}},{key:"componentDidMount",value:function(){var e=this,t=this;this.props.post&&"ID"in this.props.post!==!1&&this.props.slug===this.props.post.post_name||(this.props.clearSingleOffice(),this.props.getPostBySlug(this.props.slug),this.getBookedDates(this.props.post.ID));document.addEventListener("scroll",this.throttleScroll);this.ownerInterval=setInterval(function(){t.getUserData(t.props.post.post_author)},2e3),this.scrollToPost();var a=this.props.offices.filter(function(t){return t.ID!==e.props.post.ID});a=this.random_elems(a,4),this.setState({relatedOffices:a})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.offices.length>0&&0===this.state.relatedOffices.length){var a=e.offices.filter(function(e){return e.ID!==t.props.post.ID});a=this.random_elems(a,4),this.setState({relatedOffices:a})}}},{key:"getUserData",value:function(e){var t=this;e&&fetch("".concat(this.API_URL,"officely/v2/officeowner/").concat(e)).then(function(e){return e.json()}).then(function(a){0!=a&&(t.props.post.post_author===e&&t.setState({owner:a}),clearInterval(t.ownerInterval))}).catch(function(e){console.error("Error when fetching: ",e)})}},{key:"scrollToPost",value:function(){window.scrollTo(0,0)}},{key:"handleUpdatePeople",value:function(e){this.setState({selectedPeople:e,numberInvalid:!1})}},{key:"handleUpdatePeriod",value:function(e){console.log(e);var t={selectedPeriod:{period:e.period,startDate:e.startDate,endDate:e.endDate}};!1!==e.startDate&&!1!==e.endDate&&(t.periodInvalid=!1),this.setState(t)}},{key:"render",value:function(){var e=this,t=this.props.post,a=this.state.owner,n=null,o=this.state.numberInvalid?"invalid":"",s=this.state.periodInvalid?"invalid":"";if("gallery"in this.props.post&&!1!==this.props.post.gallery&&null!==this.props.post.gallery&&"undefined"!==typeof this.props.post.gallery)this.props.post.gallery.map(function(t,a){var n={backgroundImage:"url("+t+")"};return i.a.createElement("div",{key:e.props.post.ID+"+slide-no-"+a,className:"slide"},i.a.createElement("div",{className:"image-slide",style:n}))});else{i.a.createElement("div",{key:"+slide-placeholder",className:"slide"}," ",i.a.createElement("div",{className:"image-slide",style:{backgroundImage:"url(https://images.unsplash.com/photo-1497366754035-f200968a6e72?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80)"}}))}var c=null;this.state.relatedOffices.length>0&&(c=i.a.createElement("div",{className:"related-offices"},i.a.createElement("div",{className:"container-fluid"},i.a.createElement("div",{className:"heading-box"},i.a.createElement("h2",{className:"heading"},"Andre popul\xe6re emner der matcher din s\xf8gning")),i.a.createElement(_,{loadingMore:this.state.loadingMore,offices:this.state.relatedOffices,listScrolled:this.state.listScrolled,trackScrolling:this.trackScrolling,scrollReached:this.scrollReached,setListScrollPosition:this.setListScrollPosition,user:this.props.user}))));var r=null,l=function(e){return e.preventDefault()};return r="gallery"in this.props.post&&!1!==this.props.post.gallery&&null!==this.props.post.gallery&&"undefined"!==typeof this.props.post.gallery&&this.props.post.gallery.length>1?i.a.createElement(i.a.Fragment,null,i.a.createElement(g.a,{infinite:!0,dots:!0,offset:0,arrowLeft:i.a.createElement("span",{className:"slide-arrow slide-prev icon icomoon icon-arrow-left"}),arrowRight:i.a.createElement("span",{className:"slide-arrow slide-next icon icomoon icon-arrow-right"}),addArrowClickHandler:!0},t.gallery.map(function(e,a){return i.a.createElement("div",{key:"".concat(t.ID,"_").concat(a),className:"slide lazyload","data-bgset":e,style:{backgroundImage:"url("+e+")"},onDragStart:l})}))):i.a.createElement("div",{className:"placeholder-gallery",style:{backgroundImage:"url(https://images.unsplash.com/photo-1497366754035-f200968a6e72?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80)"}}),n="ID"in t?i.a.createElement(i.a.Fragment,null,this.confirmationBox(this.state.confirmationBoxOpen,{period:this.state.selectedPeriod.period,startDate:this.state.selectedPeriod.startDate,post:t}),i.a.createElement("div",{id:"post-"+t.ID,className:"single-office",ref:function(t){if(null!==t){t.getBoundingClientRect();e.postBottom=t.clientHeight}}},i.a.createElement("div",{className:"flex-row booking",ref:function(t){if(null!==t){e.bookingRow=t;var a=t.getBoundingClientRect();e.bookingRowTop=a.top,e.bookingRowLeft=a.left}}},i.a.createElement("div",{className:"gallery",ref:function(t){e.galleryBox=t}},i.a.createElement("div",{className:"image-wrap"},r)),i.a.createElement("div",{className:"booking-content",ref:function(t){if(e.bookingBox=t,null!==t){var a=t.getBoundingClientRect();e.bookingBoxTop=a.top,e.bookingBoxLeft=a.left}}},i.a.createElement("div",{className:"inside-booking-content"},this.newSplash(t.post_date),i.a.createElement("h1",{className:"post-title"},t.post_title),i.a.createElement(C,{onUpdate:this.handleUpdatePeople,minVal:1,startVal:1,maxVal:t.office_capacity,classname:o}),i.a.createElement(P,{periods:this.props.periods,onUpdate:this.handleUpdatePeriod,bookedDates:t.booked_dates,selected:this.state.selectedPeriod,className:s}),i.a.createElement("div",{className:"office-price"},i.a.createElement("span",{className:"price-val"},x(t.office_price,0),",-"),i.a.createElement("span",{className:"price-text"},"/ pr. mdr.")),i.a.createElement("div",{className:"safety-notice"},i.a.createElement("p",null,"Aftalen er f\xf8rst i hus n\xe5r i begge har godkendt aftalen. Og bare rolig du betaler ikke f\xf8r alt er p\xe5 plads!"))),!this.isOwnPost()&&i.a.createElement("div",{className:"booking-btn"},i.a.createElement("button",{className:"btn yellow",onClick:this.handleSubmitBooking},"Send anmodning",i.a.createElement("span",{className:"icon icomoon icon-right"}))))),i.a.createElement("div",{className:"grid-container office-sections section-box"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-sm-12 col-md-8"},i.a.createElement("div",{className:"post-location"},i.a.createElement("div",{className:"location"},!1!==t.office_location?t.office_location.map(function(e){return i.a.createElement("span",{className:"term",key:t.ID+"_"+e.term_id},e.name)}):null)),t.office_facilities.length>0&&i.a.createElement("div",{className:"facilities office-section section-box"},i.a.createElement("h2",{className:"facilities-title section-title"},"Faciliteter"),i.a.createElement("div",{className:"facilities-wrap"},t.office_facilities.map(function(e){return i.a.createElement("div",{className:"single-facility",key:e.term_id}," ",i.a.createElement("div",{className:"checkmark icomoon icon-checkmark"})," ",i.a.createElement("span",{className:"title"},e.name)," ")}))),i.a.createElement("div",{className:"about office-section section-box"},i.a.createElement("h2",{className:"about-title section-title"},"Om lejem\xe5let"),i.a.createElement("table",{className:"simple-data"},i.a.createElement("tbody",null,"office_types"in t&&t.office_types.length?i.a.createElement("tr",{className:"type"},i.a.createElement("td",{className:"name"},"Kontortype:"),i.a.createElement("td",{className:"value"},t.office_types[0].name)):null,"office_size"in t&&t.office_size?i.a.createElement("tr",{className:"area"},i.a.createElement("td",{className:"name"},"Areal:"),i.a.createElement("td",{className:"value"},t.office_size,"m",i.a.createElement("sup",null,"2"))):null,i.a.createElement("tr",{className:"location"},i.a.createElement("td",{className:"name"},"Beliggenhed:"),i.a.createElement("td",{className:"value"},"Amagerf\xe6lledvej, K\xf8benhavn (placeholder, mangler data)")))),i.a.createElement("h2",{className:"office-title"},t.post_title),i.a.createElement(y,{maxHeight:"65px",openText:"Skjul",closedText:"L\xe6s videre"},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.post_content}})),i.a.createElement("div",{className:"map"},i.a.createElement("img",{src:this.IMAGES+"map.png"}),i.a.createElement("div",{className:"nb-text"},"NB. Du f\xe5r den pr\xe6cise adresse ved gensidig aftale om leje"))),null!=t.office_rules&&t.office_rules.length>0&&i.a.createElement("div",{className:"office-rules office-section section-box"},i.a.createElement("h2",{className:"section-title"},"Kontorregler"),i.a.createElement("div",{className:"accordion-wrap"},t.office_rules.map(function(e){return null===e.value||0===e.value.length?null:i.a.createElement(b,{label:e.name,key:e.name},e.value)}))),i.a.createElement("div",{className:"security-notice office-section"},i.a.createElement("div",{className:"flex-row"},i.a.createElement("div",{className:"icon"},i.a.createElement("span",{className:"icomoon icon-sikkerhed"})),i.a.createElement("div",{className:"message"},i.a.createElement("h3",{className:"heading"},"Vigtigt!"),i.a.createElement("div",{className:"security-content"},i.a.createElement("p",null,i.a.createElement("strong",null,"Kommuniker ",i.a.createElement("u",null,"altid")," kun via Officely.")," For at vi kan beskytte dig skal du aldrig overf\xf8re penge eller kommunikere uden for officely-webstedet. Officely er din sikkerhed."))))),i.a.createElement("div",{className:"owner-info office-section section-box"},!1!==a?i.a.createElement(i.a.Fragment,null,i.a.createElement("h2",{className:"owner-info-title section-title"},"Udlejer information"),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.owner}})):i.a.createElement(E,null)),i.a.createElement("div",{className:"share-btn-section "},i.a.createElement(j,{icon:"icon-download",buttonTitle:"Del"}))))))):i.a.createElement(E,null),i.a.createElement(i.a.Fragment,null,n,c)}}]),t}(n.Component),F=a(54),U=(n.Component,n.Component,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.togglePopup=function(e){a.setState({showPopup:!a.state.showPopup})},a.isUsed=function(){return a.props.chosenFacilities.length>0?"used":"not-used"},a.state={showPopup:!1},a.node=i.a.createRef(),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"handleClick",value:function(e){null===this.node.current||this.node.contains(e.target)||!0===this.state.showPopup&&this.togglePopup()}},{key:"render",value:function(){var e,t=this,a=this.props.handleCheckboxChange,n=this.props.officeFacilities,o=this.props.chosenFacilities,s=n.map(function(e){return i.a.createElement("label",{key:e.id},i.a.createElement("input",{type:"checkbox",name:"office_type",value:e.id,id:"office_type"+e.id,onChange:a,checked:o.includes(parseInt(e.id)),"data-label":e.name}),i.a.createElement("span",{className:"checkmark"}),i.a.createElement("span",{className:"input-title"},e.name," ",i.a.createElement("span",{className:"count"},"(",e.count,")")))});return n.length&&(e=i.a.createElement("div",{className:"filter-element input-popup type-checkbox ".concat(this.isUsed()),"data-type":"checkbox",id:"office_facilities_filter",ref:function(e){return t.node=e}},i.a.createElement("h4",{className:"filter-heading"},"Kontor faciliteter"),i.a.createElement("div",{className:"input-wrap",onClick:this.togglePopup},i.a.createElement("div",{className:"chosen-value","data-empty-text":"Alle typer"},this.props.chosenFacilitiesText)),i.a.createElement("div",{className:"input-popup-content "+(this.state.showPopup?"open":"closed")},s))),i.a.createElement(i.a.Fragment,null,e)}}]),t}(n.Component)),R=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.handleCoworkClick=function(e){e.preventDefault();var t=new Event("opencowork");window.dispatchEvent(t)},a.state={},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"filter-element",id:"office_cowork_filter"},i.a.createElement("label",{className:"filter-heading"},i.a.createElement("div",{className:"checkbox-wrap"},i.a.createElement("label",{htmlFor:"office_cowork",onClick:function(e){return e.stopPropagation()}},i.a.createElement("input",{type:"checkbox",name:"office_cowork",id:"office_cowork",value:"1",checked:this.props.coworkChecked,onChange:this.props.handleCoWorkChange}),i.a.createElement("span",{className:"checkmark"}),i.a.createElement("span",{className:"input-title"},"Jeg er interesseret i ",i.a.createElement("span",{onClick:this.handleCoworkClick},"co-working"))))))}}]),t}(n.Component),A=a(181),M=a.n(A),V=(a(287),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.onClearFilter=function(){console.log("test precerange reset"),a.sliderRef.noUiSlider.set([a.props.minPriceDefault,a.props.maxPriceDefault])},a.togglePopup=function(e){a.setState({showPopup:!a.state.showPopup})},a.throttleUpdate=v(function(e){a.setState({minTemp:e[0],maxTemp:e[1]})},10),a.handleSet=function(e){a.setState({minTemp:e[0],maxTemp:e[1]}),a.props.handlePriceChange(e)},a.onOpen=function(){a.popupContent.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&a.setState({edge:!0})},a.handlePopupClick=function(){!0!==a.state.showPopup&&a.onOpen(),a.togglePopup()},a.isUsed=function(){var e=parseInt(a.props.minPrice),t=parseInt(a.props.maxPrice),n=parseInt(a.props.minPriceDefault),i=parseInt(a.props.maxPriceDefault);return e!==n||t!==i?"used":"not-used"},a.state={showPopup:!1,value:0,minTemp:0,maxTemp:1e4},a.sliderRef=i.a.createRef(),a.popupContent=i.a.createRef(),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1),document.addEventListener("clearOfficeFilter",this.onClearFilter,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"handleClick",value:function(e){this.node.contains(e.target)||!0===this.state.showPopup&&this.togglePopup()}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"filter-element input-popup ".concat(this.isUsed()),id:"office_price_filter",ref:function(t){return e.node=t}},i.a.createElement("h4",{className:"filter-heading"}),i.a.createElement("div",{className:"input-wrap",onClick:this.handlePopupClick},i.a.createElement("div",{className:"chosen-value"},"Pris")),i.a.createElement("div",{className:"input-popup-content "+(this.state.showPopup?"open":"closed")+(!0===this.state.edge?" edge":""),ref:function(t){return e.popupContent=t}},i.a.createElement("div",{className:"price-display"},i.a.createElement("div",{className:"min-price-display"},i.a.createElement("div",{className:"fake-input"},i.a.createElement("span",{className:"prefix"},"Min. "),i.a.createElement("span",{className:"value"},x(this.state.minTemp)),i.a.createElement("span",{className:"affix"}," kr."))),i.a.createElement("span",{className:"divider"}),i.a.createElement("div",{className:"max-price-display"},i.a.createElement("div",{className:"fake-input"},i.a.createElement("span",{className:"prefix"},"Max. "),i.a.createElement("span",{className:"value"},x(this.state.maxTemp)),i.a.createElement("span",{className:"affix"}," kr.")))),i.a.createElement(M.a,{instanceRef:function(t){e.sliderRef=t},value:{min:0,max:5e3},id:"price-slider",start:[this.props.minPrice,this.props.maxPrice],range:{min:0,max:1e4},step:100,connect:!0,onSet:this.handleSet,onUpdate:this.throttleUpdate})))}}]),t}(n.Component)),B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.togglePopup=function(e){a.setState({showPopup:!a.state.showPopup})},a.state={showPopup:!1,value:0},a.handleClick=a.handleClick.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"handleClick",value:function(e){this.node.contains(e.target)||!0===this.state.showPopup&&this.togglePopup()}},{key:"render",value:function(){var e=this,t=this,a=this.props.handleOrderChange;return i.a.createElement("div",{className:"filter-element input-popup type-radio close-after-change","data-type":"radio",id:"office_orderby_filter",ref:function(t){return e.node=t}},i.a.createElement("h4",{className:"filter-heading"},"Sorter efter"),i.a.createElement("div",{className:"input-wrap",onClick:this.togglePopup},i.a.createElement("div",{className:"chosen-value"},this.props.orderbyTitle)),i.a.createElement("div",{className:"input-popup-content "+(this.state.showPopup?"open":"closed")},[{title:"Pris lav til h\xf8j",key:"price_asc"},{title:"Pris h\xf8j til lav",key:"price_desc"},{title:"Alfabetisk (A-Z)",key:"title_asc"},{title:"Alfabetisk (Z-A)",key:"title_desc"},{title:"Nyeste",key:"date_desc"}].map(function(e){return i.a.createElement("label",{key:e.key,className:"order-option "+e.key},i.a.createElement("input",{type:"radio",name:"office_orderby",value:e.key,checked:t.props.orderbyKey===e.key,"data-key":e.key,"data-title":e.title,onChange:a}),i.a.createElement("span",{className:"checkmark"}),i.a.createElement("span",{className:"input-title"},e.title))})))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleOnUpdate=function(e){a.props.onUpdate&&a.props.onUpdate(e)},a.handleOnClear=function(){a.props.onClear&&a.props.onClear()},a.clearSearch=function(){a.setState({searchString:""},function(){a.handleOnUpdate(),a.handleOnClear()})},a.handleInputChange=function(e){var t=e.target.value;a.setState({searchString:t},function(){a.handleOnUpdate(t)})},a.state={searchString:""},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){var e=this.props.placeholder?this.props.placeholder:"";return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"search-wrapper search-input"},i.a.createElement("span",{className:"search-icon icomoon icon icon-search"}),i.a.createElement("input",{type:"text",className:"search-text",onChange:this.handleInputChange,value:this.state.searchString,placeholder:e}),this.state.searchString.length>0&&i.a.createElement("span",{className:"close-icon icomoon icon icon-luk",onClick:this.clearSearch})))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).handleClick=function(e){a.node.contains(e.target)||!0===a.state.popupOpen&&a.toggleShowPopup()},a.toggleShowPopup=function(){a.setState({popupOpen:!a.state.popupOpen})},a.isUsed=function(){var e=w.selectedLocations,t=a.state.chosen,n=!0;e.length!==t.length&&(n=!1);for(var i=e.length;i--;)e[i]!==t[i]&&(n=!1);return n?"not-used":"used"},a.handleCheckboxChange=function(e){Array.prototype.filter.call(e.target.parentNode.children,function(t){return t!==e.target&&t.classList.contains("input-title")});var t=parseInt(e.target.value),n=e.target.checked,i=a.props.officeLocations.find(function(e){return parseInt(e.id)===parseInt(t)});i=n?[].concat(Object(F.a)(a.props.selectedLocations),[t]):a.props.selectedLocations.filter(function(e){return parseInt(e)!==parseInt(t)}),a.setState({chosen:i},a.props.onChange(i))},a.unescapeString=function(e){return e},a.onSearchClear=function(){a.setState({searchString:""})},a.onSearchUpdate=function(e){a.setState({searchString:e})},a.state={popupOpen:!1,chosen:a.props.selectedLocations||[],searchString:""},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this,a=this.state.searchString,n=this.props.officeLocations,o=this.props.officeLocations.filter(function(e){return 0===parseInt(e.parent)});a.length>0?(n=n.filter(function(e){return RegExp("("+a+")","gmi").test(e.name)}),o=[]):n=[];var s=n.map(function(e){return i.a.createElement("label",{key:e.id},i.a.createElement("input",{type:"checkbox",name:t.props.name,value:e.id,id:t.props.name+e.id,onChange:t.handleCheckboxChange,checked:t.props.selectedLocations.includes(parseInt(e.id)),"data-label":e.name}),i.a.createElement("span",{className:"checkmark"}),i.a.createElement("span",{className:"input-title"},t.unescapeString(e.name)," ","count"in e&&!0===t.props.count&&i.a.createElement("span",{className:"count"},"(",e.count,")")))}),c=o.map(function(e){return i.a.createElement("label",{key:e.id},i.a.createElement("input",{type:"checkbox",name:t.props.name,value:e.id,id:t.props.name+e.id,onChange:t.handleCheckboxChange,checked:t.props.selectedLocations.includes(parseInt(e.id)),"data-label":e.name}),i.a.createElement("span",{className:"checkmark"}),i.a.createElement("span",{className:"input-title"},t.unescapeString(e.name)," ","count"in e&&!0===t.props.count&&i.a.createElement("span",{className:"count"},"(",e.count,")")))});0===n.length&&a.length>0&&(s=i.a.createElement("h4",{className:"no-results"},"Ingen byer fundet. Pr\xf8v igen."));var r=n.find(function(t){return t.id===parseInt(e.state.chosen.id)});void 0!==r?r.name:this.props.startText;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"filter-element city-select input-popup type-checkbox "+this.isUsed(),"data-type":"checkbox",ref:function(t){return e.node=t}},i.a.createElement("h4",{className:"filter-heading"},this.props.title),i.a.createElement("div",{className:"input-wrap",onClick:this.toggleShowPopup},i.a.createElement("div",{className:"chosen-value","data-empty-text":"V\xe6lg by"},"name"in this.state.chosen?this.state.chosen.name:"V\xe6lg by")),i.a.createElement("div",{className:"input-popup-content "+(this.state.popupOpen?"open":"closed")},i.a.createElement("div",{className:"search"},i.a.createElement(H,{placeholder:"S\xf8g...",onClear:this.onSearchClear,onUpdate:this.onSearchUpdate})),i.a.createElement("hr",{className:"divider"}),c,s)))}}]),t}(n.Component),J=(n.Component,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.onOpen=function(){a.popupContent.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&a.setState({edge:!0})},a.handleRadioChange=function(e){if(Array.prototype.filter.call(e.target.parentNode.children,function(t){return t!==e.target&&t.classList.contains("input-title")})){var t={id:e.target.value,name:e.target.dataset.label};a.setState({selected:t},a.props.onChange(t))}},a.isUsed=function(){var e=a.props.initialValue,t=a.state.selected;if(!1===t)return"not used";var n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(t);if(n.length!==i.length)return"used";for(var o=0;o<n.length;o++){var s=n[o];if(e[s]!=t[s])return"used"}return"not-used"},a.state={popupOpen:!1,selected:null!=a.props.defaultSelected&&a.props.defaultSelected,edge:!1},a.node=i.a.createRef(),a.popupContent=i.a.createRef(),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a.togglePopup=a.togglePopup.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"togglePopup",value:function(e){!0!==this.state.popupOpen&&this.onOpen(),this.setState({popupOpen:!this.state.popupOpen})}},{key:"handleClick",value:function(e){null===this.node.current||this.node.contains(e.target)||!0===this.state.popupOpen&&this.togglePopup()}},{key:"render",value:function(){var e,t=this,a=this,n=this.props.options||[];n=n.slice(0),this.props.enableAll&&!n.find(function(e){return 0===e.id})&&n.unshift({id:0,name:this.props.allText});var o=n.map(function(e){return i.a.createElement("label",{key:e.id},i.a.createElement("input",{type:"radio",name:a.props.name,value:e.id,id:a.props.name+e.id,onChange:a.handleRadioChange,checked:parseInt(a.props.defaultSelected.id)===parseInt(e.id),"data-label":e.name}),i.a.createElement("span",{className:"checkmark"}),i.a.createElement("span",{className:"input-title"},I(e.name)," ","count"in e&&!0===a.props.count&&i.a.createElement("span",{className:"count"},"(",e.count,")")))}),s=n.find(function(e){return parseInt(e.id)===parseInt(t.props.defaultSelected.id)}),c=void 0!==s?I(s.name):this.props.startText;return this.props.enableAll&&0===s.id&&(c=this.props.startText),n.length&&(e=i.a.createElement("div",{className:"filter-element input-popup type-radio ".concat(this.props.className?this.props.className:""," ").concat(this.isUsed()),"data-type":"radio",id:this.props.id,ref:function(e){return t.node=e}},i.a.createElement("h4",{className:"filter-heading"},this.props.heading),i.a.createElement("div",{className:"input-wrap",onClick:this.togglePopup},i.a.createElement("div",{className:"chosen-value","data-empty-text":"Alle typer"},c)),i.a.createElement("div",{className:"input-popup-content "+(this.state.popupOpen?"open":"closed")+(!0===this.state.edge?" edge":""),ref:function(e){return t.popupContent=e}},o))),i.a.createElement(i.a.Fragment,null,e)}}]),t}(n.Component)),K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).onOpen=function(){a.popupContent.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth)&&a.setState({edge:!0})},a.handleCheckboxChange=function(e){var t,n,i=Object(F.a)(a.props.selected);e.target.checked?i.push(+e.target.value):(t=i.indexOf(+e.target.value),i.splice(t,1));var o=i.length;n=o?"(".concat(o,1===o?") filter valgt":") filtre valgt"):a.props.chosenFacilitiesDefaultText,a.props.onChange({selected:i,text:n})},a.isUsed=function(){return a.props.selected.length>0?"used":"not-used"},a.state={popupOpen:!1,selected:null!=a.props.selected?Object(F.a)(a.props.selected):[],edge:!1},a.node=i.a.createRef(),a.popupContent=i.a.createRef(),a.handleClick=a.handleClick.bind(Object(h.a)(a)),a.togglePopup=a.togglePopup.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"togglePopup",value:function(e){!0!==this.state.popupOpen&&this.onOpen(),this.setState({popupOpen:!this.state.popupOpen})}},{key:"handleClick",value:function(e){null===this.node.current||this.node.contains(e.target)||!0===this.state.popupOpen&&this.togglePopup()}},{key:"render",value:function(){var e,t=this,a=this,n=this.props.options||[];n=n.slice(0),!0!==this.props.enableAll||n.find(function(e){return 0===e.id})||n.unshift({id:0,name:this.props.allText});var o=n.map(function(e){return i.a.createElement("label",{key:e.id},i.a.createElement("input",{type:"checkbox",name:a.props.name,value:e.id,id:"".concat(a.props.name,"+").concat(e.id),onChange:a.handleCheckboxChange,checked:a.props.selected.includes(parseInt(e.id)),"data-label":e.name}),i.a.createElement("span",{className:"checkmark"}),i.a.createElement("span",{className:"input-title"},I(e.name)," ","count"in e&&!0===a.props.count&&i.a.createElement("span",{className:"count"},"(",e.count,")")))}),s=this.props.startText;return n.length&&(e=i.a.createElement("div",{className:"filter-element input-popup type-checkbox ".concat(this.props.className," ").concat(this.isUsed()),"data-type":"checkbox",id:this.props.id,ref:function(e){return t.node=e}},i.a.createElement("h4",{className:"filter-heading"},this.props.heading),i.a.createElement("div",{className:"input-wrap",onClick:this.togglePopup},i.a.createElement("div",{className:"chosen-value","data-empty-text":"Alle typer"},s)),i.a.createElement("div",{className:"input-popup-content "+(this.state.popupOpen?"open":"closed")+(!0===this.state.edge?" edge":""),ref:function(e){return t.popupContent=e}},o))),i.a.createElement(i.a.Fragment,null,e)}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.handlePeriodUpdate=function(e){a.props.updateFilterValue({selectedPeriod:e})},a.handleCityUpdate=function(e){a.props.updateFilterValue({selectedLocations:e})},a.handleNumberUpdate=function(e){a.props.updateFilterValue({capacity:e})},a.onIndustryChange=function(e){a.props.updateFilterValue({selectedIndustry:e.selected,IndustryText:e.text})},a.handleTypeChange=function(e){a.props.updateFilterValue({chosenType:e})},a.state={},a.handleRadioChange=a.handleRadioChange.bind(Object(h.a)(a)),a.handleFacilitiesChange=a.handleFacilitiesChange.bind(Object(h.a)(a)),a.handlePriceChange=a.handlePriceChange.bind(Object(h.a)(a)),a.handleOrderChange=a.handleOrderChange.bind(Object(h.a)(a)),a.handleCoWorkChange=a.handleCoWorkChange.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){0===this.props.postCount&&this.props.getOffices()}},{key:"componentWillMount",value:function(){}},{key:"handleRadioChange",value:function(e){Array.prototype.filter.call(e.target.parentNode.children,function(t){return t!==e.target&&t.classList.contains("input-title")})&&this.props.updateFilterValue({chosenType:e.target.value,chosenTypeText:e.target.dataset.label})}},{key:"handleFacilitiesChange",value:function(e){var t,a,n=Object(F.a)(this.props.chosenFacilities);e.target.checked?n.push(+e.target.value):(t=n.indexOf(+e.target.value),n.splice(t,1));var i=n.length;a=i?"(".concat(i,1===i?") filter valgt":") filtre valgt"):this.props.chosenFacilitiesDefaultText,this.props.updateFilterValue({chosenFacilities:n,chosenFacilitiesText:a})}},{key:"handleCoWorkChange",value:function(e){this.props.updateFilterValue({coworkChecked:!this.props.coworkChecked})}},{key:"handlePriceEnd",value:function(e){var t=parseInt(e[0]),a=parseInt(e[1]);t===this.props.minPrice&&a===this.props.maxPrice||(this.props.updateParentState("priceChanged",!0),this.props.updateFilterValue({minPrice:t,maxPrice:a}))}},{key:"handlePriceChange",value:function(e){var t=parseInt(e[0]),a=parseInt(e[1]);t===this.props.minPrice&&a===this.props.maxPrice||(this.props.updateParentState("priceChanged",!0),this.props.updateFilterValue({minPrice:t,maxPrice:a}))}},{key:"handleOrderChange",value:function(e){var t=e.target.dataset.key,a=e.target.dataset.title;t&&a&&this.props.updateFilterValue({orderbyKey:t,orderbyTitle:a})}},{key:"render",value:function(){var e,t=this;return parseInt(this.props.postCount)>0?e=i.a.createElement(i.a.Fragment,null,"Oplev de ",i.a.createElement("span",{className:"count"},this.props.postCount)," kontorpladser der passer til din s\xf8gning"):0===parseInt(this.props.postCount)&&!0!==this.props.postsLoading&&(e=i.a.createElement(i.a.Fragment,null,"Ingen kontorer fundet med dine filtre, pr\xf8v venligst igen")),!1===this.props.filterDataLoaded?i.a.createElement(E,null):i.a.createElement("form",{id:"office-filter",className:"office-filter-form"},i.a.createElement("div",{className:"main-form"},i.a.createElement("div",{className:"container-fluid retina-max office-container"},i.a.createElement("div",{className:"field-wrap"},i.a.createElement(W,{title:"By",officeLocations:this.props.officeLocations,selectedLocations:this.props.selectedLocations,onChange:this.handleCityUpdate,name:"city-selector"}),i.a.createElement(C,{maxVal:99,minVal:0,startVal:this.props.capacity,onUpdate:this.handleNumberUpdate}),i.a.createElement(J,{options:this.props.officeTypes,count:!0,enableAll:!0,allText:"Alle typer",startText:"Alle typer",defaultSelected:this.props.chosenType,initialValue:w.chosenType,onChange:this.handleTypeChange,name:"type_radio",id:"office_type_filter",heading:"Kontor type"}),i.a.createElement(P,{periods:this.props.periods,title:"Periode",onUpdate:this.handlePeriodUpdate,selected:this.props.selectedPeriod,updateParentState:this.props.updateParentState}),i.a.createElement(V,{handlePriceChange:this.handlePriceChange,minPrice:this.props.minPrice,maxPrice:this.props.maxPrice,minPriceDefault:this.props.minPriceDefault,maxPriceDefault:this.props.maxPriceDefault,showOfficePrice:this.props.showOfficePrice,priceChanged:this.props.priceChanged}),i.a.createElement(U,{handleCheckboxChange:this.handleFacilitiesChange,officeFacilities:this.props.officeFacilities,chosenFacilities:this.props.chosenFacilities,chosenFacilitiesText:this.props.chosenFacilitiesText,chosenFacilitiesDefaultText:this.chosenFacilitiesDefaultText}),i.a.createElement(K,{options:this.props.industries,count:!1,startText:"Branche",selected:this.props.selectedIndustry,onChange:this.onIndustryChange,name:"industry_checkbox",id:"office_industry_filter",className:"invert-color"}),i.a.createElement("div",{className:"clear-form filter-element",onClick:function(){t.props.clearFilter()}},i.a.createElement("div",{className:"input-wrap"},i.a.createElement("div",{className:"chosen-value"},"Ryd s\xf8gning")))),i.a.createElement("div",{className:"field-wrap bottom-row"},i.a.createElement(R,{coworkChecked:this.props.coworkChecked,handleCoWorkChange:this.handleCoWorkChange})))),i.a.createElement("div",{className:"after-form"},i.a.createElement("div",{className:"container-fluid retina-max office-container"},i.a.createElement("div",{className:"field-wrap order"},i.a.createElement("div",{className:"filter-element"},i.a.createElement("h4",{className:"found-posts"},e)),i.a.createElement(B,{orderbyTitle:this.props.orderbyTitle,orderbyKey:this.props.orderbyKey,showOrderby:this.props.showOrderby,handleOrderChange:this.handleOrderChange})))))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.OFFICE_URL="/office/",a.handleFormSubmit=function(e){e.preventDefault();var t={};t.capacity=a.props.capacity,t.locations=a.props.selectedLocations,t.type=a.props.chosenType,t.cowork=a.props.coworkChecked,window.sessionStorage.setItem("officeFilter",JSON.stringify(t)),window.location=a.OFFICE_URL},a.handleTypeChange=function(e){a.props.updateFilterValue({chosenType:e})},a.handleCoWorkChange=function(e){a.props.updateParentState({coworkChecked:!a.props.coworkChecked})},a.handlePeriodUpdate=function(e){a.props.updateParentState({selectedPeriod:e})},a.handleCityUpdate=function(e){a.props.updateParentState({selectedLocations:e})},a.handleNumberUpdate=function(e){a.props.updateParentState({capacity:e})},a.state={},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return!1===this.props.filterDataLoaded?i.a.createElement(E,null):i.a.createElement("form",{id:"office-short-filter",className:"office-filter-form"},i.a.createElement("div",{className:"main-form"},i.a.createElement("div",{className:"field-wrap top-row"},i.a.createElement(W,{title:"By",officeLocations:this.props.officeLocations,selectedLocations:this.props.selectedLocations,onChange:this.handleCityUpdate,name:"city-selector"}),i.a.createElement(C,{capacity:this.props.capacity,maxVal:99,minVal:0,startVal:1,onUpdate:this.handleNumberUpdate}),i.a.createElement(J,{options:this.props.officeTypes,count:!0,enableAll:!0,allText:"Alle typer",startText:"Alle typer",defaultSelected:this.props.chosenType,initialValue:[],onChange:this.handleTypeChange,name:"type_radio",id:"office_type_filter",heading:"Kontor type"}),i.a.createElement("div",{className:"filter-element",id:"submit-filter"},i.a.createElement("button",{value:"submit",className:"submit",onClick:this.handleFormSubmit},"Kom godt i gang",i.a.createElement("span",{className:"arrow-right-icon icomoon icon-right"})))),i.a.createElement("div",{className:"field-wrap bottom-row"},i.a.createElement(R,{coworkChecked:this.props.coworkChecked,handleCoWorkChange:this.handleCoWorkChange}))))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"post-list",className:"no-posts"},i.a.createElement("h4",null,"Inds\xe6t et sjov 404-ish billede her?"))}}]),t}(n.Component),q=a(51),G=window.AbortController,X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.OFFICE_URL="/office/",a.getTaxonomyLocalstorage=function(e){var t=window.localStorage.getItem(e);if(!t)return!1;t=JSON.parse(t);var n=(new Date).getTime()-t.time;if((n=Math.floor(n/1e3/60/60/24))<=1)return console.log("got "+e+" from localstorage"),a.setState(Object(r.a)({},e,t.data)),!0;window.localStorage.removeItem(e)},a.setTaxonomyLocalstorage=function(e,t){var a={time:(new Date).getTime(),data:t};window.localStorage.setItem(e,JSON.stringify(a))},a.redirectToArchive=function(){a.setState({redirect:!0})},a.checkStatus=function(e){return e.ok?Promise.resolve(e):Promise.reject(new Error(e.statusText))},a.handleOfficesQueryData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.posts.length){var n={noOffices:!e.posts.length,postsLoading:!1,offices:e.posts,loadedAll:!1,loadingMore:!1,postCount:e.foundPosts};return!0===t&&(n=Object(c.a)({},n,{offices:a.state.offices.concat(e.posts),noOffices:!1})),a.setState(n),!0}var i={postsLoading:!1,loadedAll:!0,loadingMore:!1};return!1===t&&(i=Object(c.a)({},i,{noOffices:!0,offices:e.posts,postCount:e.foundPosts})),a.setState(i),!0},a.getOfficeIndustries=function(){var e=a.getTaxonomyLocalstorage("officeIndustries");return e||fetch("".concat(a.API_URL,"wp/v2/office_industry?per_page=99")).then(function(e){return a.checkStatus(e),e.json()}).then(function(e){a.setTaxonomyLocalstorage("officeIndustries",e),a.setState({officeIndustries:e})}).catch(function(e){console.error("Error when fetching: ",e)})},a.clearFilter=function(){var e=new Event("clearOfficeFilter");document.dispatchEvent(e),a.setState(w,function(){a.getOffices()})},a.trackScrolling=function(e){a.scrollReached(e,1500)&&!1===a.state.loadingMore&&!1===a.state.loadedAll&&a.getOffices(!0)},a.state=Object(c.a)({filterDataLoaded:!1,user:{loggedIn:window.wpApiSettings.loggedIn,id:window.wpApiSettings.id},post:{},offices:[],noOffices:!1,listScrolled:0,postsLoading:!0,loadingMore:!1,loadedAll:!1,postCount:0,officeFacilities:[],officeTypes:[],officeLocations:[],officeIndustries:[],minPrice:0,maxPrice:1e4,minPriceDefault:0,maxPriceDefault:1e4,redirect:!1},w),a.periods=[{id:0,name:"Ubegr\xe6nset"},{id:1,name:"Min. 1 mdr."},{id:3,name:"Min. 3 mdr."},{id:6,name:"Min. 6 mdr."},{id:9,name:"Min. 9 mdr."},{id:12,name:"Min. 12 mdr."}],G&&(a.fetchController=new G,a.signal=a.fetchController.signal),a.getOffices=a.getOffices.bind(Object(h.a)(a)),a.getData=a.getData.bind(Object(h.a)(a)),a.getOfficeFacilities=a.getOfficeFacilities.bind(Object(h.a)(a)),a.getOfficeTypes=a.getOfficeTypes.bind(Object(h.a)(a)),a.getOfficeLocations=a.getOfficeLocations.bind(Object(h.a)(a)),a.getPostBySlug=a.getPostBySlug.bind(Object(h.a)(a)),a.updateFilterValue=a.updateFilterValue.bind(Object(h.a)(a)),a.updateParentState=a.updateParentState.bind(Object(h.a)(a)),a.scrollReached=a.scrollReached.bind(Object(h.a)(a)),a.setListScrollPosition=a.setListScrollPosition.bind(Object(h.a)(a)),a.clearSingleOffice=a.clearSingleOffice.bind(Object(h.a)(a)),a.checkLocalStorageInit=a.checkLocalStorageInit.bind(Object(h.a)(a)),a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.checkLocalStorageInit()}},{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(){this.state.redirect&&this.setState({redirect:!1})}},{key:"checkLocalStorageInit",value:function(){var e=JSON.parse(sessionStorage.getItem("officeFilter"));if(console.log(e),e){console.log("found settings in localStorage");var t={};return e.locations&&(t.selectedLocations=e.locations),e.capacity&&(t.capacity=e.capacity),e.type&&(t.chosenType=e.type),e.cowork&&(t.coworkChecked=!0),sessionStorage.removeItem("officeFilter"),this.setState(t)}return!1}},{key:"getData",value:function(){var e=this;Promise.all([this.getOfficeLocations(),this.getOfficeTypes(),this.getOfficeFacilities(),this.getOfficeIndustries()]).then(function(){e.setState({filterDataLoaded:!0})}).catch(function(e){console.log(e)})}},{key:"getOfficeLocations",value:function(){var e=this,t=this.getTaxonomyLocalstorage("officeLocations");return t||(console.log("".concat(this.API_URL,"wp/v2/office_location?per_page=99")),fetch("".concat(this.API_URL,"wp/v2/office_location?per_page=99")).then(function(t){return e.checkStatus(t),t.json()}).then(function(t){e.setTaxonomyLocalstorage("officeLocations",t),e.setState({officeLocations:t})}).catch(function(e){console.error("Error when fetching: ",e)}))}},{key:"getOfficeFacilities",value:function(){var e=this,t=this.getTaxonomyLocalstorage("officeFacilities");return t||(console.log("".concat(this.API_URL,"wp/v2/office_facilities?per_page=99")),fetch("".concat(this.API_URL,"wp/v2/office_facilities?per_page=99")).then(function(t){return e.checkStatus(t),t.json()}).then(function(t){e.setTaxonomyLocalstorage("officeFacilities",t),e.setState({officeFacilities:t})}).catch(function(e){console.error("Error when fetching: ",e)}))}},{key:"getOfficeTypes",value:function(){var e=this,t=this.getTaxonomyLocalstorage("officeTypes");return t||fetch("".concat(this.API_URL,"wp/v2/office_type?per_page=99")).then(function(t){return e.checkStatus(t),t.json()}).then(function(t){e.setTaxonomyLocalstorage("officeTypes",t),e.setState({officeTypes:t})}).catch(function(e){console.error("Error when fetching: ",e)})}},{key:"getPostBySlug",value:function(e){var t=this;this.setState({post:{}});var a=this.state.offices.find(function(t){return t.post_name===e});if(a)return console.log("found post in state",a),this.setState({post:a}),!0;console.log("fetching post from getPostBySlug - slug: "+e),fetch("".concat(this.API_URL,"officely/v2/office/").concat(e)).then(function(e){return e.json()}).then(function(e){e&&t.setState({post:e,noOffices:!e.length})}).catch(function(e){console.error("Error when fetching: ",e)})}},{key:"getOffices",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.fetchController.abort(),this.fetchController=new G,this.signal=this.fetchController.signal,this.setState({postsLoading:!t,loadingMore:t});var a=[];if(!0===t&&a.push("offset="+this.state.offices.length),this.state.chosenType.id!==w.chosenType.id&&a.push("office_type="+this.state.chosenType.id),this.state.chosenFacilities.length&&a.push("office_facilities="+this.state.chosenFacilities),!0===this.state.coworkChecked&&a.push("cowork="+this.state.coworkChecked),!0===this.state.priceChanged&&(this.state.minPrice!==w.minPriceDefault&&a.push("minprice="+this.state.minPrice),this.state.maxPrice!==w.maxPriceDefault&&(console.log(this.state.maxPrice,w.maxPriceDefault),a.push("maxprice="+this.state.maxPrice))),1!==this.state.capacity&&a.push("capacity="+this.state.capacity),!1!==this.state.selectedIndustry&&0!==this.state.selectedIndustry&&this.state.selectedIndustry.length&&a.push("office_industry="+this.state.selectedIndustry),!1!==this.state.selectedPeriod&&!1!==this.state.selectedPeriod.startDate){var n=this.state.selectedPeriod.period.id,i=this.state.selectedPeriod.startDate.toISOString(),o=this.state.selectedPeriod.endDate.toISOString();a.push("period=".concat(n,"&start_date=").concat(i,"&end_date=").concat(o))}if(this.state.selectedLocations.length>0){var s=this.state.selectedLocations.join(",");a.push("office_location=".concat(s))}a.push("officeorder="+this.state.orderbyKey);var c="officely/v2/offices?"+(a=a.join("&")),r="officesearch_".concat(a),l=JSON.parse(window.localStorage.getItem(r)),p=(new Date).getTime();if(l){var d=l.time,u=p-d;if((u=Math.floor(u/1e3/60/60/24))<1&&d>window.wpApiSettings.updateTime)return console.log("getting offices from localstorage"),console.log(c),this.handleOfficesQueryData(l.data,t);window.localStorage.removeItem(r)}return console.log("route: ".concat(this.API_URL).concat(c)),fetch("".concat(this.API_URL).concat(c),{signal:this.signal}).then(function(t){return e.checkStatus(t),t.json()}).then(function(a){console.log(a),e.handleOfficesQueryData(a,t),console.log("setting localstorage posts after REST");var n={time:p,data:a};window.localStorage.setItem(r,JSON.stringify(n))}).catch(function(e){console.error("Error when fetching: ",e)})}},{key:"updateParentState",value:function(e,t){"object"===typeof e&&null!==e?this.setState(e):this.setState(Object(r.a)({},e,t))}},{key:"updateFilterValue",value:function(e){var t=this;console.log("updateFilterValue - trigger getOffices",e),this.setState(e,function(){t.getOffices()})}},{key:"scrollReached",value:function(e,t){if(e)return e.getBoundingClientRect().bottom-t<=window.innerHeight}},{key:"setListScrollPosition",value:function(e){this.setState({listScrolled:e})}},{key:"clearSingleOffice",value:function(){this.setState({post:{}})}},{key:"render",value:function(){var e,t=this;return!1===this.state.filterDataLoaded?i.a.createElement(E,null):(e=!0===this.state.postsLoading?i.a.createElement(E,null):this.state.offices.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(_,{loadingMore:this.state.loadingMore,offices:this.state.offices,listScrolled:this.state.listScrolled,trackScrolling:this.trackScrolling,scrollReached:this.scrollReached,setListScrollPosition:this.setListScrollPosition,user:this.state.user})):i.a.createElement(Y,null),i.a.createElement("div",{className:"app bbh-inner-section "+(!0===this.state.filterDataLoaded?"all-loaded":""),id:"office-app"},i.a.createElement(D.a,null,this.state.redirect&&i.a.createElement(q.a,Object(r.a)({to:"/office"},"to",{pathname:"/office",state:{redirect:!1}})),i.a.createElement(q.d,null,i.a.createElement(q.b,{exact:!0,path:[this.OFFICE_URL,"".concat(this.OFFICE_URL,"page/**/")],render:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(z,{updateFilterValue:t.updateFilterValue,updateParentState:t.updateParentState,clearFilter:t.clearFilter,getOffices:t.getOffices,postsLoading:t.state.postsLoading,postCount:t.state.postCount,filterDataLoaded:t.state.filterDataLoaded,officeTypes:t.state.officeTypes,chosenType:t.state.chosenType,chosenTypeText:t.state.chosenTypeText,capacity:t.state.capacity,officeFacilities:t.state.officeFacilities,chosenFacilities:t.state.chosenFacilities,chosenFacilitiesText:t.state.chosenFacilitiesText,chosenFacilitiesDefaultText:t.state.chosenFacilitiesDefaultText,coworkChecked:t.state.coworkChecked,minPrice:t.state.minPrice,maxPrice:t.state.maxPrice,minPriceDefault:t.state.minPriceDefault,maxPriceDefault:t.state.maxPriceDefault,priceChanged:t.state.priceChanged,orderbyKey:t.state.orderbyKey,orderbyTitle:t.state.orderbyTitle,periods:t.periods,selectedPeriod:t.state.selectedPeriod,industries:t.state.officeIndustries,selectedIndustry:t.state.selectedIndustry,officeLocations:t.state.officeLocations,selectedLocations:t.state.selectedLocations}),i.a.createElement("div",{className:"container-fluid retina-max"},e))}}),i.a.createElement(q.b,{exact:!0,path:"".concat(this.OFFICE_URL,":slug"),render:function(e){return i.a.createElement(T,{key:e.match.params.slug,slug:e.match.params.slug,post:t.state.post,getPostBySlug:t.getPostBySlug,clearSingleOffice:t.clearSingleOffice,offices:t.state.offices,periods:t.periods,user:t.state.user})}}),i.a.createElement(q.b,{exact:!0,path:"",render:function(){return i.a.createElement(Q,{updateFilterValue:t.updateFilterValue,updateParentState:t.updateParentState,clearFilter:t.clearFilter,filterDataLoaded:t.state.filterDataLoaded,officeTypes:t.state.officeTypes,chosenType:t.state.chosenType,chosenTypeText:t.state.chosenTypeText,capacity:t.state.capacity,coworkChecked:t.state.coworkChecked,officeLocations:t.state.officeLocations,selectedLocations:t.state.selectedLocations})}})))))}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(u.a)(t).call(this,e))).API_URL="/wp-json/",a.OFFICE_URL="/office/",a.postClicked=function(e){e.preventDefault(),console.log(e.currentTarget),window.location.href=e.currentTarget.getAttribute("href")},a.onCarouselChange=function(e){return a.setState({currentSlide:parseInt(e)})},a.leftArrow=function(e,t){return e>t?i.a.createElement("span",{className:"slide-arrow slide-prev icon icomoon icon-arrow-left"}):""},a.rightArrow=function(e,t){return e>t?i.a.createElement("span",{className:"slide-arrow slide-next icon icomoon icon-arrow-right"}):""},a.state={offices:[],user:{loggedIn:window.wpApiSettings.loggedIn,id:window.wpApiSettings.id},currentSlide:0},a}return Object(m.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new Event("scroll");window.dispatchEvent(t);var a=this.props.ids,n="flex_offices_"+a,i=JSON.parse(window.localStorage.getItem(n)),o=(new Date).getTime();if(i){var s=i.time,c=o-s;return(c=Math.floor(c/1e3/60/60/24))<1?(console.log("getting flex offices from localstorage - "+n),this.setState({offices:i.posts})):window.localStorage.removeItem(n),!0}fetch("".concat(this.API_URL,"officely/v2/offices?ids=").concat(a)).then(function(e){return e.json()}).then(function(t){if(console.log(t),t.posts.length){var a={offices:t.posts};e.setState(a);var i={time:o,posts:t.posts};window.localStorage.setItem(n,JSON.stringify(i))}}).catch(function(e){console.error("Error when fetching: ",e)})}},{key:"render",value:function(){var e=this,t=this.state.offices||[];return i.a.createElement(i.a.Fragment,null,i.a.createElement(D.a,null,i.a.createElement("div",{className:"office-list"},i.a.createElement(g.a,{infinite:!1,addArrowClickHandler:!0,value:this.state.currentSlide,onChange:this.onCarouselChange,draggable:t.length>4,slidesPerPage:4,slidesPerScroll:4,breakpoints:{1367:{infinite:t.length>3,slidesPerPage:3,draggable:!0},441:{slidesPerPage:1.5,centered:!0}}},t.map(function(t){return i.a.createElement(L,{noLink:!0,key:t.ID,post:t,user:e.state.user,postClicked:e.postClicked})})))))}}]),t}(n.Component);document.getElementById("root")&&s.a.render(i.a.createElement(X,null),document.getElementById("root"));var $=document.getElementsByClassName("office-list-flexible");console.log($);for(var ee=0;ee<$.length;ee++){var te=$[ee],ae=te.getAttribute("data-office-ids");s.a.render(i.a.createElement(Z,{ids:ae}),te)}}},[[182,1,2]]]);
//# sourceMappingURL=main.3c527625.chunk.js.map